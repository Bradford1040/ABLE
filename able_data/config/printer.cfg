# This file contains common pin mappings for the BigTreeTech SKR 3.
# This board can ship with one of two chips, STM32H743 or STM32H723.
# To use this config, during "make menuconfig" enable "low-level
# options", "STM32H743" or "STM32H723", "128KiB bootloader",
# and "25MHz clock".

# See docs/Config_Reference.md for a description of parameters.

[include shell_command.cfg]
[include mainsail.cfg]
[include macros.cfg]
[include steppers_drivers.cfg]
[include KAMP_Settings.cfg]
[include fans.cfg]
[include retraction.cfg]
[include bed.cfg]
[include display.cfg]
[include tool_head.cfg]
[include maintenance.cfg]
[include runout.cfg]


[virtual_sdcard]
path: /home/octo/able_data/gcodes
on_error_gcode: CANCEL_PRINT

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_170030001651313238353730-if00
baud: 250000

[printer]
kinematics: cartesian
max_velocity: 400
max_accel: 8000
# max_accel_to_decel:3500
max_z_velocity: 20
max_z_accel: 700
square_corner_velocity: 5.0
#minimum_cruise_ratio: 0.50

[danger_options]
#error_on_unused_config_options: True
#   If an unused config option or section should cause an error
#   if False, will warn but allow klipper to still run.
#   The default is True.
#allow_plugin_override: False
#   Allows modules in `plugins` to override modules of the same name in `extras`
#   The default is False.
multi_mcu_trsync_timeout: 0.025
#   The timeout (in seconds) for MCU synchronization during the homing process when
#   multiple MCUs are in use. The default is 0.025
homing_elapsed_distance_tolerance: 0.5
#   Tolerance (in mm) for distance moved in the second homing. Ensures the
#   second homing distance closely matches the `min_home_dist` when using
#   sensorless homing. The default is 0.5mm.
#temp_ignore_limits: False
#   When set to true, this parameter ignores the min_value and max_value
#   limits for temperature sensors. It prevents shutdowns due to
#   'ADC out of range' and similar errors by allowing readings outside the
#   specified range without triggering a shutdown. The default is False.
autosave_includes: True
#   When set to true, SAVE_CONFIG will recursively read [include ...] blocks
#   for conflicts to autosave data. Any configurations updated will be backed
#   up to configs/config_backups.
bgflush_extra_time: 0.250
#   This allows to set extra flush time (in seconds). Under certain conditions,
#   a low value will result in an error if message is not get flushed, a high value
#   (0.250) will result in homing/probing latency. The default is 0.250

[endstop_phase]

[exclude_object]
enable_exclude_object: True

[force_move]
enable_force_move: True


[save_variables]
filename: ~/able_data/config/variables.cfg
#   Required - provide a filename that would be used to save the
#   variables to disk e.g. ~/variables.cfg


[idle_timeout]
timeout: 7800
gcode:
    M117 Timeout reached
    {% if printer.pause_resume.is_paused %}
#    M117 Disable hotend_fan
    M84 ;disable motors
    SET_HEATER_TEMPERATURE HEATER=extruder TARGET=0
    STATUS_READY
    {% else %}
    M117 Awaiting file
    #POWER_OFF_PRINTER
    {% endif %}timeout: 7800


[gcode_arcs]
resolution: 0.2
#   An arc will be split into segments. Each segment's length will
#   equal the resolution in mm set above. Lower values will produce a
#   finer arc, but also more work for your machine. Arcs smaller than
#   the configured value will become straight lines. The default is
#   1mm.

[respond]
default_type: echo
#   Sets the default prefix of the "M118" and "RESPOND" output to one
#   of the following:
#     echo: "echo: " (This is the default)
#     command: "// "
#     error: "!! "
default_prefix: echo:
#   Directly sets the default prefix. If present, this value will
#   override the "default_type".
enable_respond: True



#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bltouch]
#*# z_offset = 2.525
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.054000, 0.044625, 0.067500, 0.078250, 0.090625, 0.101625, 0.130625, 0.146750, 0.150625, 0.158000
#*# 	0.009750, 0.026750, 0.047125, 0.055375, 0.068875, 0.064375, 0.096875, 0.089875, 0.087625, 0.097000
#*# 	-0.005750, 0.013875, 0.039750, 0.029750, 0.039750, 0.044750, 0.063125, 0.065250, 0.064625, 0.067625
#*# 	0.014875, 0.017500, 0.022125, 0.023500, 0.029125, 0.035000, 0.045875, 0.058500, 0.049125, 0.050750
#*# 	0.021625, 0.030125, 0.032000, 0.029125, 0.068750, 0.071500, 0.036000, 0.033750, 0.032125, 0.024875
#*# 	0.032250, 0.026625, 0.025375, 0.016750, 0.017375, 0.017500, 0.018875, 0.012000, 0.000375, 0.016250
#*# 	0.051375, 0.041875, 0.030250, 0.047750, 0.024125, 0.021875, 0.025000, 0.017875, 0.001875, 0.089750
#*# 	0.006875, 0.005000, 0.012125, 0.013125, 0.009875, 0.006125, 0.015625, -0.001375, -0.017000, -0.018750
#*# 	-0.002250, 0.021000, 0.034000, 0.033375, 0.033000, 0.030250, 0.032000, 0.027625, 0.013375, 0.022625
#*# 	0.021000, 0.034750, 0.044625, 0.045250, 0.046000, 0.043375, 0.044375, 0.041875, 0.030000, 0.041375
#*# x_count = 10
#*# y_count = 10
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 5.0
#*# max_x = 179.96
#*# min_y = 15.0
#*# max_y = 224.97
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 72.428
#*# pid_ki = 1.543
#*# pid_kd = 850.127
#*#
#*# [input_shaper]
